import{a as A,u as T,r as l,j as e,a3 as F,m as d,a4 as L,S as _,a5 as $}from"./index-Dxs5WRYu.js";import{S as z}from"./SectionHeader-BFg4651Y.js";import{C as D}from"./chevron-left-ByQCak9E.js";function X(){var j,b,N,S;A();const{data:s=[],isLoading:c}=T({queryKey:["/api/testimonials"],queryFn:async()=>{const t=await fetch("/api/testimonials");if(!t.ok)throw new Error("Error fetching testimonials");return t.json()},staleTime:1/0,gcTime:1/0,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchInterval:!1}),{data:a}=T({queryKey:["/api/config"],queryFn:async()=>(await fetch("/api/config")).json(),staleTime:1/0,gcTime:1/0,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchInterval:!1}),r=((j=a==null?void 0:a.find(t=>t.key==="testimonials_section"))==null?void 0:j.value)||{},h=((b=a==null?void 0:a.find(t=>t.key==="section_visibility"))==null?void 0:b.value)||{},E=(h==null?void 0:h.testimonials)!==!1,k=(S=(N=a==null?void 0:a.find(t=>t.key==="badge_gradient"))==null?void 0:N.value)==null?void 0:S.gradient,[m,n]=l.useState(0),[f,u]=l.useState(!0),[p,C]=l.useState(null),[v,y]=l.useState(null),g=l.useRef();l.useEffect(()=>(f&&s.length>1&&(g.current=setInterval(()=>{n(t=>(t+1)%s.length)},1e4)),()=>{g.current&&clearInterval(g.current)}),[f,s.length]);const I=()=>{n(t=>(t+1)%s.length),o()},M=()=>{n(t=>(t-1+s.length)%s.length),o()},O=t=>{n(t),o()},o=()=>{u(!1)},w=50,R=t=>{y(null),C(t.targetTouches[0].clientX)},q=t=>{y(t.targetTouches[0].clientX)},H=()=>{if(!p||!v)return;const t=p-v,i=t>w,P=t<-w;i?(n(x=>(x+1)%s.length),o()):P&&(n(x=>(x-1+s.length)%s.length),o())};return c?e.jsx("section",{id:"testimonials","data-section":"testimonials",className:"main-section relative",style:{margin:0,padding:0},children:e.jsx("div",{className:"relative py-16 sm:py-20 lg:py-24",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-gray-200 border-t-gray-600 rounded-full animate-spin mx-auto"}),e.jsx("h2",{className:"text-xl font-medium text-gray-600 mt-4",children:"Carregando depoimentos..."})]})})}):!E||!s.length?null:e.jsx("section",{id:"testimonials","data-section":"testimonials",className:"main-section relative",style:{margin:0,padding:0},children:e.jsxs("div",{className:"relative py-16 sm:py-20 lg:py-24",children:[e.jsx(z,{badge:r.badge||"DEPOIMENTOS",title:r.title||"Histórias de (transformação)",description:r.description||"Depoimentos de pessoas que encontraram acolhimento, superação e crescimento através do meu acompanhamento psicológico.",badgeGradient:k,animated:!0,sectionKey:"testimonials"}),e.jsxs("div",{className:"relative max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 mt-16",children:[e.jsx("div",{className:"relative overflow-hidden",onMouseEnter:()=>u(!1),onMouseLeave:()=>u(!0),onTouchStart:R,onTouchMove:q,onTouchEnd:H,children:e.jsx(F,{mode:"wait",children:e.jsx(d.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.6,ease:[.22,1,.36,1]},className:"relative",children:e.jsx(K,{testimonial:s[m]})},m)})}),e.jsxs("div",{className:"flex items-center justify-center mt-12 gap-6",children:[e.jsx(d.button,{onClick:M,whileHover:{scale:1.1},whileTap:{scale:.95},className:"flex items-center justify-center w-12 h-12 rounded-full bg-white shadow-lg border border-gray-200 text-gray-500 hover:text-gray-700 hover:border-gray-300 transition-all duration-300","aria-label":"Depoimento anterior",children:e.jsx(D,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex items-center gap-2",children:s.map((t,i)=>e.jsx(d.button,{onClick:()=>O(i),whileHover:{scale:1.2},whileTap:{scale:.9},className:`relative transition-all duration-300 ${i===m?"w-8 h-3 bg-gray-700 rounded-full":"w-3 h-3 bg-gray-300 hover:bg-gray-400 rounded-full"}`,"aria-label":`Ir para depoimento ${i+1}`},i))}),e.jsx(d.button,{onClick:I,whileHover:{scale:1.1},whileTap:{scale:.95},className:"flex items-center justify-center w-12 h-12 rounded-full bg-white shadow-lg border border-gray-200 text-gray-500 hover:text-gray-700 hover:border-gray-300 transition-all duration-300","aria-label":"Próximo depoimento",children:e.jsx(L,{className:"w-5 h-5"})})]})]})]})})}function K({testimonial:s}){return e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl p-8 md:p-10 shadow-sm hover:shadow-md border border-gray-200/30 transition-all duration-500 hover:bg-white/90",children:[e.jsxs("div",{className:"flex items-start gap-6 mb-8",children:[e.jsx("div",{className:"relative flex-shrink-0",children:e.jsx("div",{className:"w-[5.25rem] h-[5.25rem] md:w-[6.3rem] md:h-[6.3rem] rounded-full overflow-hidden bg-gray-100 shadow-md border-4 border-white/70",children:s.photo&&s.photo.trim()!==""?e.jsx("img",{src:s.photo.startsWith("/")?s.photo:`/uploads/testimonials/${s.photo}`,alt:`Foto de ${s.name}`,className:"w-full h-full object-cover",onError:c=>{const a=c.currentTarget;a.style.display="none";const r=a.parentElement;r&&(r.innerHTML=`
                        <div class="w-full h-full flex items-center justify-center bg-gray-200">
                          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" fill="#9ca3af"/>
                          </svg>
                        </div>
                      `)}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200",children:e.jsx("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z",fill:"#9ca3af"})})})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-2xl md:text-3xl font-light text-gray-900 mb-1 leading-tight",children:s.name}),e.jsx("p",{className:"text-gray-500 text-base md:text-lg mb-2 font-light",children:s.service}),e.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((c,a)=>e.jsx(_,{className:`w-4 h-4 md:w-5 md:h-5 ${a<s.rating?"text-amber-400 fill-amber-400":"text-gray-200"}`},a))})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx($,{className:"w-8 h-8 text-gray-300 fill-current"})})]}),e.jsx("div",{className:"w-full h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent mb-8"}),e.jsx("blockquote",{children:e.jsxs("p",{className:"text-gray-700 text-lg md:text-xl leading-relaxed font-light italic text-center",children:['"',s.testimonial,'"']})})]})})}export{X as TestimonialsCarousel};
