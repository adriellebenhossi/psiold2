import{r as o,a as H,u as k,j as t,m as d,a4 as K,ap as _,aq as G}from"./index-Dxs5WRYu.js";import{S as U}from"./SectionHeader-BFg4651Y.js";import{C as $}from"./chevron-left-ByQCak9E.js";function V(){var j,N,S;const[i,T]=o.useState(0),[g,c]=o.useState(!0);H(),o.useState(new Set);const[p,C]=o.useState(0),[f,P]=o.useState(0),[r,v]=o.useState(!1),[a,b]=o.useState(null),m=o.useRef(null),E=o.useRef(null),{data:I=[],isLoading:L}=k({queryKey:["/api/photo-carousel"],queryFn:async()=>await(await fetch("/api/photo-carousel")).json()}),{data:w=[]}=k({queryKey:["/api/config"],staleTime:5*60*1e3}),u=((j=w.find(e=>e.key==="photo_carousel_section"))==null?void 0:j.value)||{},R=(S=(N=w.find(e=>e.key==="badge_gradient"))==null?void 0:N.value)==null?void 0:S.gradient,s=I.filter(e=>e.isActive);o.useEffect(()=>(g&&s.length>1&&!r&&!a&&(m.current=setInterval(()=>{h()},7e3)),()=>{m.current&&clearInterval(m.current)}),[g,s.length,r,i,a]);const n=o.useCallback(e=>{r||e===i||(v(!0),T(e),setTimeout(()=>{v(!1)},600))},[i,r]),h=o.useCallback(()=>{if(r)return;const e=(i+1)%s.length;n(e)},[i,s.length,n,r]),y=o.useCallback(()=>{if(r)return;const e=(i-1+s.length)%s.length;n(e)},[i,s.length,n,r]),X=e=>{b(e),c(!1),document.body.classList.add("modal-open"),setTimeout(()=>{const l=document.querySelector(".photo-modal-overlay");l&&l.style.setProperty("z-index","999999999","important")},50)},x=()=>{b(null),c(!0),document.body.classList.remove("modal-open")};o.useEffect(()=>{const e=l=>{l.key==="Escape"&&a&&x()};if(a)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[a]);const z=e=>{C(e.targetTouches[0].clientX),c(!1)},q=e=>{P(e.targetTouches[0].clientX)},A=()=>{if(!p||!f)return;const e=p-f,l=e>75,F=e<-75;l?h():F&&y(),setTimeout(()=>c(!0),2e3)};return L||s.length===0?null:(s[i],t.jsxs("section",{id:"photo-carousel","data-section":"gallery",className:"py-8 sm:py-16 relative overflow-hidden",ref:E,children:[t.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl relative z-10",children:[t.jsx(U,{badge:u.badge||"GALERIA",title:u.title||"Nossa (Galeria)",description:u.description||"Um olhar pelo ambiente acolhedor onde acontece o cuidado",badgeGradient:R,animated:!0,className:"mb-16",sectionKey:"gallery"}),t.jsx(d.div,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8,delay:.2},className:"relative w-full max-w-md sm:max-w-lg md:max-w-xl lg:max-w-xl xl:max-w-2xl mx-auto",children:t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"relative rounded-2xl sm:rounded-3xl shadow-xl overflow-hidden border border-gray-200/50 backdrop-blur-sm",children:t.jsx("div",{className:"relative w-full h-72 sm:h-80 md:h-96 lg:h-[420px] xl:h-[480px] 2xl:h-[520px] overflow-hidden",onTouchStart:z,onTouchMove:q,onTouchEnd:A,children:s.map((e,l)=>t.jsxs("div",{className:`absolute inset-0 transition-opacity duration-500 ${l===i?"opacity-100":"opacity-0"}`,children:[t.jsx("img",{src:e.imageUrl,alt:e.title,className:"w-full h-full object-cover cursor-pointer md:cursor-default",onClick:()=>{window.innerWidth<768&&X(s[i])}}),l===i&&e.showText&&(e.title||e.description)&&t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent pointer-events-none",children:t.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 sm:p-6 lg:p-8",children:t.jsxs("div",{className:"text-white",children:[e.title&&t.jsx("h3",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold mb-2 leading-tight",children:e.title}),e.description&&t.jsx("p",{className:"text-sm sm:text-base lg:text-lg text-gray-200 leading-relaxed font-light line-clamp-2 lg:line-clamp-3",children:e.description})]})})})]},e.id))})}),s.length>1&&t.jsxs("div",{className:"flex items-center justify-center mt-12 gap-6",children:[t.jsx(d.button,{onClick:y,disabled:r,whileHover:{scale:1.1},whileTap:{scale:.95},className:`flex items-center justify-center w-12 h-12 rounded-full bg-white shadow-lg border border-gray-200 text-gray-500 hover:text-gray-700 hover:border-gray-300 transition-all duration-300
                             disabled:opacity-50 disabled:cursor-not-allowed`,"aria-label":"Foto anterior",children:t.jsx($,{className:"w-5 h-5"})}),t.jsx("div",{className:"flex items-center gap-2",children:s.map((e,l)=>t.jsx(d.button,{onClick:()=>n(l),disabled:r,whileHover:{scale:1.2},whileTap:{scale:.9},className:`relative transition-all duration-300 ${l===i?"w-8 h-3 bg-gray-700 rounded-full":"w-3 h-3 bg-gray-300 hover:bg-gray-400 rounded-full"}`,"aria-label":`Ir para foto ${l+1}`},l))}),t.jsx(d.button,{onClick:h,disabled:r,whileHover:{scale:1.1},whileTap:{scale:.95},className:`flex items-center justify-center w-12 h-12 rounded-full bg-white shadow-lg border border-gray-200 text-gray-500 hover:text-gray-700 hover:border-gray-300 transition-all duration-300
                             disabled:opacity-50 disabled:cursor-not-allowed`,"aria-label":"PrÃ³xima foto",children:t.jsx(K,{className:"w-5 h-5"})})]}),s.length>1&&t.jsx("div",{className:"absolute top-3 left-3 z-20",children:t.jsxs("div",{className:"bg-white/20 backdrop-blur-md border border-white/30 text-white text-xs font-medium px-2 py-1 rounded-lg shadow-lg",children:[i+1,"/",s.length]})})]})})]}),a&&_.createPortal(t.jsxs("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-[9999999] p-4 sm:p-4",onClick:x,children:[t.jsx("button",{onClick:x,className:"fixed top-3 right-3 sm:top-4 sm:right-4 text-white hover:text-gray-300 bg-black/50 hover:bg-black/70 rounded-full p-2.5 sm:p-2 transition-all z-[9999999]","aria-label":"Fechar foto",children:t.jsx(G,{size:20,className:"sm:w-6 sm:h-6"})}),t.jsxs("div",{className:"relative max-w-[85vw] max-h-[75vh] sm:max-w-[85vw] sm:max-h-[75vh] md:max-w-[92vw] md:max-h-[82vh] lg:max-w-[94vw] lg:max-h-[84vh] xl:max-w-[96vw] xl:max-h-[86vh] flex flex-col items-center justify-center",onClick:e=>e.stopPropagation(),children:[t.jsx("img",{src:a.imageUrl,alt:a.title||"Foto",className:"max-w-full max-h-full object-contain rounded-2xl shadow-2xl"}),a.showText&&(a.title||a.description)&&t.jsxs("div",{className:"mt-4 text-center max-w-full",children:[a.title&&t.jsx("h3",{className:"text-white text-lg sm:text-xl font-bold mb-2",children:a.title}),a.description&&t.jsx("p",{className:"text-white/90 text-sm leading-relaxed",children:a.description})]})]})]}),document.body)]}))}export{V as PhotoCarousel,V as default};
